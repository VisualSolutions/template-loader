(()=>{"use strict";var e,t,o,n,a,r,i,s={77:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DummyPlayer=void 0;var o=function(){function e(){}return e.prototype.mediaFinished=function(e){console.log("Media finished for playId: ".concat(e))},e.prototype.mediaError=function(e,t){console.log("Media error for playId: ".concat(e,", message: ").concat(t))},e.prototype.mediaReady=function(e,t){console.log("Media ready for playId: ".concat(e,", started: ").concat(t))},e.prototype.getParameter=function(e){return null},e.prototype.openMediaInZone=function(e,t,o){console.log("Opening media ".concat(t," in zone ").concat(o," for playId: ").concat(e))},e.prototype.executeCommand=function(e,t,o){console.log("Executing command ".concat(t," with params ").concat(o," for playId: ").concat(e))},e.prototype.addPlaybackListener=function(e,t){console.log("Adding playback listener with function ".concat(t," for playId: ").concat(e))},e}();t.DummyPlayer=o},981:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;t.Message=function(e,t,o){this.id=e,this.messageType=t,this.payload=o,this.replyPassThroughData={}}},148:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerCommunicator=void 0;var n=o(981),a=function(e,t,o){this.resolve=e,this.reject=t,this.timeoutId=o},r=function(e,t){this.messageType=e,this.onMessage=t},i=function(){function e(e){this.messageSender=e,this.pendingPromises=new Map,this.subscribers=[],this.messageIdGenerator=1}return e.prototype.sendMessage=function(e,t){var o=this,r=this.messageIdGenerator++;return"REQUEST_ACKNOWLEDGE"===e||"REQUEST_RESPONSE"===e?Promise.resolve():new Promise((function(i,s){var c=setTimeout((function(){return o.processPendingPromise(r,null,"Request timeout")}),5e3);o.pendingPromises.set(r,new a(i,s,c)),o.messageSender(new n.Message(r,e,t))}))},e.prototype.subscribe=function(e,t){var o=this,n=new r(e,t);return this.subscribers.push(n),{unsubscribe:function(){var e=o.subscribers.indexOf(n);-1!==e&&o.subscribers.splice(e,1)}}},e.prototype.onMessageReceived=function(e){"REQUEST_ACKNOWLEDGE"!==e.messageType&&("REQUEST_RESPONSE"!==e.messageType?(this.sendMessage("REQUEST_ACKNOWLEDGE",{requestMessageId:e.id}),this.subscribers.filter((function(t){return t.messageType===e.messageType})).forEach((function(t){t.onMessage(e)}))):this.processPendingPromise(e.payload.requestMessageId,e.payload.response,e.payload.error))},e.prototype.processPendingPromise=function(e,t,o){var n=this.pendingPromises.get(e);n&&(this.pendingPromises.delete(e),clearTimeout(n.timeoutId),o?n.reject(o):n.resolve(t))},e}();t.PlayerCommunicator=i},281:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RemotePlayer=void 0;var o=function(){function e(e){this.sendMessageFunction=e}return e.prototype.executeCommandImpl=function(e,t,o){var n;if("string"==typeof o)try{n=JSON.parse(o)}catch(e){n=o}else n=o;this.sendMessageFunction({playId:e,type:t,params:n})},e.prototype.getParameter=function(e){return null},e.prototype.mediaFinished=function(e){this.executeCommandImpl(e,"PLAYBACK_STATE",{type:"MEDIA_FINISHED"})},e.prototype.mediaError=function(e,t){this.executeCommandImpl(e,"PLAYBACK_STATE",{type:"MEDIA_ERROR",message:t})},e.prototype.mediaReady=function(e,t){this.executeCommandImpl(e,"PLAYBACK_STATE",{type:"MEDIA_READY"})},e.prototype.openMediaInZone=function(e,t,o){this.executeCommandImpl(e,"MEDIA_PLAY",{mediaId:t,zoneId:o})},e.prototype.executeCommand=function(e,t,o){this.executeCommandImpl(e,t,o)},e.prototype.addPlaybackListener=function(e,t){this.executeCommandImpl(e,"NOTIFICATIONS_REGISTRATION",{notificationType:"MEDIA_PLAYBACK",callbackMethod:t})},e}();t.RemotePlayer=o},185:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.callMethod=function(e,t,o){var n=t.split(".").reduce((function(e,t,o,n){if(!e)return e;if(!e.thisArg)return null;var a=e.thisArg[t];return a?o===n.length-1?"function"==typeof a?{thisArg:e.thisArg,functionObject:a}:null:{thisArg:a,functionObject:null}:null}),{thisArg:e,functionObject:null});if(!n)throw new Error("Method not found: "+t+" in "+e);return n.functionObject.apply(n.thisArg,o)}}},c={};function p(e){var t=c[e];if(void 0!==t)return t.exports;var o=c[e]={exports:{}};return s[e](o,o.exports,p),o.exports}e=p(281),t=p(148),o=p(185),n=p(77),a=function(){function e(){}return e.DurationAuto=-1,e}(),r=function(){function e(){}return e.OpenMediaInZone="openMediaInZone",e.PlaybackActionInZone="playbackActionInZone",e.PlaylistDataRequest="playlistDataRequest",e.VotingPlaylistRequest="votingPlaylistRequest",e.RegisterNotifications="registerNotifications",e.CreateCustomZone="createCustomZone",e.DeleteCustomZone="deleteCustomZone",e.ClosePlaybackApp="closePlaybackApp",e.OpenHomeApp="openHomeApp",e.OpenVodApp="openVodApp",e.OpenDiagnosticsApp="openDiagnosticsApp",e.OpenSettingsApp="openSettingsApp",e.OpenApp="openApp",e.SendChannelMessage="sendChannelMessage",e.JoinChannel="joinChannel",e.SendSerialMessage="sendSerialMessage",e.ReceiveSerialMessages="receiveSerialMessages",e.GetNewAnalyticsSessionId="getNewAnalyticsSessionId",e.CreateAnalyticsLog="createAnalyticsLog",e.IsMediaFileAvailable="isMediaFileAvailable",e}(),i=function(){function i(){var e=this;this.startupParameters=i.readStartupParameters(),this.communicator=i.initializeCommunicator((function(t){return e.executeCommand("COMMUNICATOR_MESSAGE",t)})),this.globalCallbackMethodNameCounter=0,this.started=this.startupParameters.autoPlay,window.Player||(window.self!==window.top?window.Player=i.createIframePlayer():window.Player=new n.DummyPlayer),this.startPromise=new Promise((function(t,o){e.startPromiseResolve=t})),this.started&&this.startPromiseResolve(),this.componentsPromise=new Promise((function(t,o){e.componentsPromiseResolve=t}))}return i.createIframePlayer=function(){return window.addEventListener("message",(function(e){e&&e.data&&e.data.payload&&"MvisionPlayerApi"==e.data.channel&&"ExecuteJavaScript"===e.data.payload.type&&(0,o.callMethod)(window,e.data.payload.method,e.data.payload.params)})),new e.RemotePlayer((function(e){window.parent.postMessage({channel:"MvisionPlayerApi",payload:e},"*")}))},i.readStartupParameters=function(){if(window.LoaderStartupParameters)return window.LoaderStartupParameters;var e=new URLSearchParams(window.location.search);return{mframeUrl:e.get("data")||"./mframe.json?timestamp="+Date.now(),mframeData:null,playId:parseInt(e.get("playId")||"0"),duration:parseInt(e.get("duration")||a.DurationAuto.toString()),autoPlay:"false"!==(e.get("autoPlay")||"true").toLowerCase(),platformType:e.get("platformType")||"unknown",platformTypeHeadless:!1}},i.initializeCommunicator=function(e){var o=new t.PlayerCommunicator(e);return window.messageFromPlayer=function(e){o.onMessageReceived(e)},o},i.prototype.getNextGlobalCallbackMethodName=function(){return this.globalCallbackMethodNameCounter=this.globalCallbackMethodNameCounter+1,"mvisionGlobalCallbackMethodName"+this.globalCallbackMethodNameCounter},i.prototype.getComponents=function(){return this.componentsPromise},i.prototype.getCommunicator=function(){return this.communicator},i.prototype.isStarted=function(){return this.startPromise},i.prototype.getPlatformType=function(){return this.startupParameters.platformType},i.prototype.isHeadlessPlatform=function(){return this.startupParameters.platformTypeHeadless},i.prototype.getDuration=function(){return this.startupParameters.duration},i.prototype.ifDurationNotSetEndIn=function(e){this.startupParameters.duration==a.DurationAuto&&setTimeout(this.finished,1e3*e)},i.prototype.ready=function(){window.Player.mediaReady(this.startupParameters.playId,this.started)},i.prototype.error=function(e){e||(e="Unspecified error."),window.Player.mediaError(this.startupParameters.playId,e)},i.prototype.finished=function(){window.Player.mediaFinished(this.startupParameters.playId)},i.prototype.getPlayerParameter=function(e){try{return window.Player.getParameter(e)}catch(e){}return null},i.prototype.getPlayerParameters=function(e){return this.executeCommandReturnPromise("GET_SITE_PARAMETERS",{keys:e})},i.prototype.openMediaInZone=function(e,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=null),this.executeCommand(r.OpenMediaInZone,{mediaId:e,zoneId:t,loop:o,startMode:n})},i.prototype.stopPlaybackInZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"STOP",zoneId:e})},i.prototype.resumeLoopPlaybackInZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"RESUME_LOOP_PLAYBACK",zoneId:e})},i.prototype.clearPendingEventsInZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"CLEAR_PENDING_EVENTS",zoneId:e})},i.prototype.playNextInZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"PLAY_NEXT",zoneId:e})},i.prototype.createCustomZone=function(e,t,o,n,a,i,s,c){void 0===s&&(s=!1),void 0===c&&(c=null),this.executeCommand(r.CreateCustomZone,{zoneName:e,coordinates:{left:t,top:o,width:n,height:a},behind:s,persistent:i,loopingPlaylistItemId:c})},i.prototype.deleteCustomZone=function(e){this.executeCommand(r.DeleteCustomZone,{zoneName:e})},i.prototype.openMediaInCustomZone=function(e,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=null),this.executeCommand(r.OpenMediaInZone,{mediaId:e,zoneName:t,loop:o,startMode:n})},i.prototype.stopPlaybackInCustomZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"STOP",zoneName:e})},i.prototype.resumeLoopPlaybackInCustomZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"RESUME_LOOP_PLAYBACK",zoneName:e})},i.prototype.clearPendingEventsInCustomZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"CLEAR_PENDING_EVENTS",zoneName:e})},i.prototype.playNextInCustomZone=function(e){this.executeCommand(r.PlaybackActionInZone,{type:"PLAY_NEXT",zoneName:e})},i.prototype.closePlaybackApp=function(){this.executeCommand(r.ClosePlaybackApp,{})},i.prototype.openHomeApp=function(){this.executeCommand(r.OpenHomeApp,{})},i.prototype.openVodApp=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.executeCommand(r.OpenVodApp,{initialFolderIdentifier:e,allowUpNavigationFromInitialFolder:t})},i.prototype.openDiagnosticsApp=function(){this.executeCommand(r.OpenDiagnosticsApp,{})},i.prototype.openSettingsApp=function(e){void 0===e&&(e={}),this.executeCommand(r.OpenSettingsApp,e)},i.prototype.openApp=function(e){this.executeCommand(r.OpenApp,{appId:e})},i.prototype.getMusicStreamTracks=function(e){this.executeCommand(r.PlaylistDataRequest,{dataType:"MUSIC_TRACKS_LIST",responseCallbackMethod:e.name})},i.prototype.getActiveMusicPlaylistDataAndTracks=function(e){this.executeCommand(r.PlaylistDataRequest,{dataType:"ACTIVE_MUSIC_PLAYLIST_DATA_AND_TRACKS",responseCallbackMethod:e.name})},i.prototype.getActiveMusicPlaylistData=function(e){this.executeCommand(r.PlaylistDataRequest,{dataType:"ACTIVE_MUSIC_PLAYLIST_DATA",responseCallbackMethod:e.name})},i.prototype.getPlaylistContainerItems=function(e,t){this.executeCommand(r.PlaylistDataRequest,{dataType:"PLAYLIST_CONTAINER_ITEMS",referenceItem:e,responseCallbackMethod:t.name})},i.prototype.voteMusicTrack=function(e){this.executeCommand(r.VotingPlaylistRequest,{action:"VOTE",referenceItem:e})},i.prototype.getVotedTracks=function(e){this.executeCommand(r.VotingPlaylistRequest,{action:"GET_VOTED_ITEMS",responseCallbackMethod:e.name})},i.prototype.addPlaybackListener=function(e){try{window.Player.addPlaybackListener(this.startupParameters.playId,e.name)}catch(e){console.log("Error while calling Player method: "+e)}},i.prototype.addPlaylistUpdateListener=function(e){this.executeCommand(r.RegisterNotifications,{notificationType:"PLAYBACK_STREAM_UPDATED",callbackMethod:e.name})},i.prototype.addActiveMusicPlaylistChangeListener=function(e){this.executeCommand(r.RegisterNotifications,{notificationType:"ACTIVE_MUSIC_PLAYLIST_CHANGED",callbackMethod:e.name})},i.prototype.sendChannelMessage=function(e,t,o){this.executeCommand(r.SendChannelMessage,{clientId:e,channelName:t,payload:o})},i.prototype.joinChannel=function(e,t,o){this.executeCommand(r.JoinChannel,{clientId:e,channelName:t,callbackMethod:o.name})},i.prototype.sendSerialMessageToConnectedDevice=function(e,t,o,n){return void 0===n&&(n=!1),this.sendSerialMessageToTargetDevice(null,e,t,o,n)},i.prototype.sendSerialMessageToTargetDevice=function(e,t,o,n,a){return void 0===a&&(a=!1),this.executeCommandReturnPromise(r.SendSerialMessage,{serialMessageRequest:{targetProductId:e,baudRate:t,dataType:o,data:n,ignoreResponse:a}})},i.prototype.receiveSerialMessagesFromConnectedDevice=function(e,t,o,n,a){this.receiveSerialMessagesFromTargetDevice(null,e,t,o,n,a)},i.prototype.receiveSerialMessagesFromTargetDevice=function(e,t,o,n,a,i){this.executeCommand(r.ReceiveSerialMessages,{serialMessageRequest:{targetProductId:e,baudRate:t,dataType:o},retryOnError:n,callbackMethod:a.name,errorCallbackMethod:i.name})},i.prototype.getNewAnalyticsSessionId=function(){return this.executeCommand(r.GetNewAnalyticsSessionId,null)},i.prototype.getNewAnalyticsSessionIdPromise=function(){return this.executeCommandReturnPromise("GET_NEW_ANALYTICS_SESSION_ID_PROMISE",{})},i.prototype.createAnalyticsEvent=function(e,t,o){this.executeCommand(r.CreateAnalyticsLog,{userTriggered:e,sessionId:t,customParameters:o})},i.prototype.isMediaFileAvailable=function(e){return"true"==this.executeCommand(r.IsMediaFileAvailable,e)},i.prototype.areMediaFilesAvailable=function(e){return this.executeCommandReturnPromise("ARE_MEDIA_FILES_AVAILABLE",{mediaIds:e})},i.prototype.sendDatagramMessage=function(e,t,o,n){return this.executeCommandReturnPromise("DATAGRAM_SEND",{targetAddress:e,port:t,dataType:o,message:n})},i.prototype.receiveDatagramMessages=function(e,t,o,n,a){this.executeCommand("DATAGRAM_RECEIVE",{multicastAddress:e,port:t,dataType:o,callbackMethod:n.name,errorCallbackMethod:a.name})},i.prototype.setPlaylistItemsSchedules=function(e){this.executeCommand("SET_PLAYLIST_ITEMS_SCHEDULES",e)},i.prototype.executeCommand=function(e,t){try{return window.Player.executeCommand(this.startupParameters.playId,e,JSON.stringify(t))}catch(e){return console.log("Error while calling Player method: "+e),null}},i.prototype.executeCommandReturnPromise=function(e,t){var o=this.getNextGlobalCallbackMethodName(),n=this.getNextGlobalCallbackMethodName();return new Promise((function(a,r){var i=function(){delete window[o],delete window[n]};window[o]=function(e){i(),a(e)},window[n]=function(e){i(),r(new Error(e))},t.callbackMethod=o,t.errorCallbackMethod=n;try{window.Player.executeCommand(this.startupParameters.playId,e,JSON.stringify(t))}catch(e){i(),r(e)}}))},i.prototype.play=function(){this.started||(this.started=!0,this.startPromiseResolve())},i.prototype.loadDataJson=function(){var e=this;if(this.startupParameters.mframeData)try{this.componentsPromiseResolve(JSON.parse(this.startupParameters.mframeData).components)}catch(e){this.error("Error loading mframe.json: "+e)}else{var t=new XMLHttpRequest;t.onload=function(){try{if(200!==t.status)throw new Error("HTTP error statusCode="+t.status);e.componentsPromiseResolve(JSON.parse(t.responseText).components)}catch(t){e.error("Error loading mframe.json: "+t)}},t.onerror=function(){e.error("Error loading mframe.json: HTTP error statusCode="+t.status)},t.open("GET",this.startupParameters.mframeUrl,!0),t.send()}},i}(),window.Loader=new i,window.Loader.loadDataJson()})();